<ion-header [translucent]="true">
  <ion-toolbar color="principal">
    <ion-buttons  slot="start" >
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>
      <div class="ion-text-wrap">
    
        {{ 'materiaconsumos.titulo' | translate }}
       </div>

    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
    <ion-list>
    <ion-item >
      <ion-label  color="dark">
        {{ 'materiaconsumos.empresa' | translate }} *</ion-label>
      <ionic-selectable 
        [(ngModel)]="DataForm.empresa"
        [items]="empresas"
        itemValueField="IDEMP"
        itemTextField="EMPRESA"
        [canSearch]="true"
        (onChange)="changeEmpresas($event)"
        closeButtonText="Cerrar">
      </ionic-selectable>
    </ion-item>
    <ion-item >
      <ion-label  color="dark">{{ 'materiaconsumos.granja' | translate }} *</ion-label>
      <ionic-selectable 
        [(ngModel)]="DataForm.granja"
        [items]="granjas"
        itemValueField="IDGRA"
        itemTextField="NOMBRE"
        [canSearch]="true"
        (onChange)="changeGranjas($event)"
        closeButtonText="Cerrar">
      </ionic-selectable>
    </ion-item>
    <ion-item >
      <ion-label  color="dark">{{ 'materiaconsumos.responsable' | translate }} *</ion-label>
      <ionic-selectable 
        [(ngModel)]="DataForm.responsable"
        [items]="responsables"
        itemValueField="ID"
        itemTextField="NOMBRES"
        [canSearch]="true"
        closeButtonText="Cerrar">
      </ionic-selectable>
    </ion-item>
    <ion-item>
      <ion-label  position="" class="ion-text-wrap">{{ 'materiaconsumos.fecha' | translate }} *</ion-label>
      <ion-datetime monthShortNames='Ene, Feb, Mar, Abr, May, Jun, Jul, Ago, Sep, Oct, Nov, Dic' min="1980" max="2030" cancelText="{{ 'global.cancelar' | translate }}"  doneText="{{ 'global.accept' | translate }}" placeholder="{{ 'materiaconsumos.seleccionefecha' | translate }}" [(ngModel)]="DataForm.fecha" ></ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label position="stacked" style="font-size: larger;">{{ 'materiaconsumos.observaciones' | translate }}:</ion-label>
      <ion-input [(ngModel)]="DataForm.observaciones"  placeholder="{{ 'materiaconsumos.observaciones' | translate }}" type="text"></ion-input>
    </ion-item>
    </ion-list>
    <ion-list style="margin:0px 15%;" class="ion-text-center">
        <ion-item class="ion-text-left"> 
          <ion-label >
            <p style="color:black;font-size: medium;font-weight: bolder;border:1px solid black;margin:0px;padding:5px;">{{ 'materiaconsumos.resumenconsumo' | translate }}</p>
            <p style="color:black;border:1px solid black;margin:0px;padding:5px;">{{ 'materiaconsumos.lote' | translate }} : <ion-badge color="primary">{{lotestotal}}</ion-badge></p>
            <p style="color:black;border:1px solid black;margin:0px;padding:5px;">{{ 'materiaconsumos.cantidad' | translate }} : <ion-badge color="primary">{{cantidadtotal}}</ion-badge></p>
          </ion-label>
        </ion-item>
      <ion-button color="principal" (click)="irAConsumos()" style="border-radius:10px !important;">{{ 'materiaconsumos.agregarconsumo' | translate }}</ion-button>
    </ion-list>
    <ion-list>
        <ion-item *ngFor="let item of listConsumos,let i = index">
          <ion-item class="ion-text-left"> 
            <ion-label >
              <p style="color:black;font-size: medium;font-weight: bolder;border:1px solid black;margin:0px;padding:5px;">{{ 'materiaconsumos.materia' | translate }} : {{item.INFODATA.materia.NOMBRE}}</p>
              <p style="color:black;border:1px solid black;margin:0px;padding:5px;">{{ 'materiaconsumos.espaciosprodu' | translate }} : <ion-badge color="primary">{{item.INFODATA.espacios.NOMBRE}}</ion-badge></p>
              <p style="color:black;border:1px solid black;margin:0px;padding:5px;">{{ 'materiaconsumos.lote' | translate }} : <ion-badge color="primary">{{item.LOTE}}</ion-badge></p>
              <p style="color:black;border:1px solid black;margin:0px;padding:5px;">{{ 'materiaconsumos.cantidad' | translate }} : <ion-badge color="primary">{{item.CANTIDAD}}</ion-badge></p>
            </ion-label>
              <ion-button color="primary" (click)="edit(i)" slot="end">  <ion-icon name="create-outline">
              </ion-icon>       
               </ion-button>
              <ion-button color="danger" (click)="borrar(i)" slot="end">  <ion-icon name="close">
              </ion-icon>       
               </ion-button>
          </ion-item>
        </ion-item>     
    </ion-list>
</ion-content>
<ion-footer style="    background: var(--ion-color-light);">
  <ion-row color="light">
    <ion-col size="2">

    </ion-col>
    <ion-col size="8">
      <ion-button  (click)="ValidarRegistro()" expand="block" color="principal" style="border-radius:10px !important;">{{ 'materiaconsumos.enviardatos' | translate }}</ion-button>
      
    </ion-col>
    <ion-col size="2">
      
    </ion-col>
  </ion-row>
</ion-footer>

